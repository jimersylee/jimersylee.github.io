<?xml version="1.0" encoding="UTF-8"?><rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>Jimersy Lee's Blog</title>
        <description>这是Jimersy Lee的个人博客</description>
        <link>/</link>
        <atom:link href="//feed.xml" rel="self" type="application/rss+xml" />
        <pubDate>2017-09-04 23:09:45</pubDate>
        <lastBuildDate>2017-09-04 23:09:45</lastBuildDate>
        <generator>Gitblog v1.0</generator>
                <item>
            <title>为域名配置免费SSL证书</title>
            <description>
            &lt;!--
author: Jimersy Lee
head: 
date: 2016-08-05
title: 为域名配置免费SSL证书
tags: NGINX,SSL
images: 
category: devops
status: publish
summary: 本文在CenOS主机上,使用腾讯云主机,以及阿里云域名服务,完成Nginx上指定的域名的ssl配置
--&gt;
&lt;h1&gt;Nginx配置ssl&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;腾讯云申请证书
&lt;img src=&quot;http://jimersyleetest.qiniudn.com/%E7%94%B3%E8%AF%B7%E8%AF%81%E4%B9%A6.png&quot; alt=&quot;申请证书&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://jimersyleetest.qiniudn.com/%E9%AA%8C%E8%AF%81%E8%AF%81%E4%B9%A6.png&quot; alt=&quot;选择验证方式&quot; /&gt;
&lt;img src=&quot;http://jimersyleetest.qiniudn.com/%E6%B7%BB%E5%8A%A0%E8%AE%B0%E5%BD%95.png&quot; alt=&quot;获得验证内容&quot; /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;阿里云域名解析验证证书
&lt;img src=&quot;http://jimersyleetest.qiniudn.com/%E8%A7%A3%E6%9E%90%E8%AE%BE%E7%BD%AE.png&quot; alt=&quot;解析&quot; /&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;安装证书&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;下载证书&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;上传配置证书&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#将本地的jenkins.jimersylee.com.zip上传至jimersylee.com这个机子上的/data/ssl_cert目录
scp jenkins.jimersylee.com.zip root@jimersylee.com:/data/ssl_cert
#登录主机解压文件
ssh root@jimersylee.com
cd /data/ssl_cert
unzip jenkins.jimersylee.com.zip
#各种web服务器的证书就解压完成了,然后去配置Nginx
[root@VM_77_132_centos ssl_cert]# tree
.
├── Apache
│   ├── 1_root_bundle.crt
│   ├── 2_blog.jimersylee.com.crt
│   ├── 2_jenkins.jimersylee.com.crt
│   ├── 2_jimersylee.com.crt
│   ├── 3_blog.jimersylee.com.key
│   ├── 3_jenkins.jimersylee.com.key
│   └── 3_jimersylee.com.key
├── blog.jimersylee.com.cert.zip
├── IIS
│   ├── blog.jimersylee.com.pfx
│   ├── jenkins.jimersylee.com.pfx
│   ├── jimersylee.com.pfx
│   └── keystorePass.txt
├── jenkins.jimersylee.com.zip
├── jimersylee.com.cert.zip
├── Nginx
│   ├── 1_blog.jimersylee.com_bundle.crt
│   ├── 1_jenkins.jimersylee.com_bundle.crt
│   ├── 1_jimersylee.com_bundle.crt
│   ├── 2_blog.jimersylee.com.key
│   ├── 2_jenkins.jimersylee.com.key
│   └── 2_jimersylee.com.key
└── Tomcat
    ├── jenkins.jimersylee.com.jks
    └── keystorePass.txt
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;nginx配置
&lt;pre&gt;&lt;code&gt;
#创建配置文件
vim /etc/nginx/conf.d/jenkins.conf&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;写入以下内容&lt;/h1&gt;
&lt;h1&gt;配置443端口&lt;/h1&gt;
&lt;p&gt;server {
listen       443;
server_name  jenkins.jimersylee.com;
ssl on;
ssl_certificate /data/ssl_cert/Nginx/1_jenkins.jimersylee.com_bundle.crt;
ssl_certificate_key /data/ssl_cert/Nginx/2_jenkins.jimersylee.com.key;
ssl_session_timeout 5m;
ssl_protocols TLSv1 TLSv1.1 TLSv1.2; #按照这个协议配置
ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;#按照这个套件配置
ssl_prefer_server_ciphers on;
root /data/java_app/tomcat9/webapps;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    index index.html index.htm index.php;
    location / {
       try_files $uri @jenkins;
    }
    location @jenkins {
       internal;
       proxy_pass http://127.0.0.1:8080;
                                                      }

    access_log /data/logs/jenkins/jenkins.log main;
    }&lt;/code&gt;&lt;/pre&gt;
&lt;h1&gt;转发80的访问到jenkins&lt;/h1&gt;
&lt;p&gt;server {
listen 80;
server_name jenkins.jimersylee.com;
rewrite ^ &lt;a href=&quot;https://$server_name$request_uri&quot;&gt;https://$server_name$request_uri&lt;/a&gt;? permanent;
}&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;- 重启Nginx生效&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;nginx -s stop  #停止
nginx -t  #测试Nginx配置是否正确
nginx  #启动Nginx
```&lt;/code&gt;&lt;/pre&gt;            </description>
            <pubDate>2017-09-04 23:02:45</pubDate>
            <link>//blog/devops/ssl.html</link>
            <guid isPermaLink="true">//blog/devops/ssl.html</guid>
                                               <category>devops</category>
                                    </item>
                <item>
            <title>CentOS7安装Jenkins</title>
            <description>
            &lt;!--
author: Jimersy Lee
head: 
date: 2014-01-01
title: CentOS7安装Jenkins
tags: CENTOS,JENKINS
images: 
category: devops
status: publish
summary: 本文展示了如何在CentOS上通过yum安装jenkins,而不是使用war包,以及tomcat容器启动jenkins
--&gt;
&lt;p&gt;环境:CentOS7&lt;/p&gt;
&lt;p&gt;1.下载安装包
在https://jenkins.io/download/找到相应的包下载地址&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget https://pkg.jenkins.io/redhat/jenkins-2.76-1.1.noarch.rpm&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2.安装包&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo rpm -i jenkins-2.76-1.1.noarch.rpm&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3.启动jenkins&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo service jenkins start&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;4.配置nginx&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /etc/nginx/conf.d/jenkins.conf
server {
 2         listen       443;
 3         server_name  jenkins.jimersylee.com;
 4         ssl on;
 5         ssl_certificate /data/ssl_cert/Nginx/1_jimersylee.com_bundle.crt;
 6         ssl_certificate_key /data/ssl_cert/Nginx/2_jimersylee.com.key;
 7         ssl_session_timeout 5m;
 8         ssl_protocols TLSv1 TLSv1.1 TLSv1.2; #按照这个协议配置
 9         ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;#按照这个套件配置
10         ssl_prefer_server_ciphers on;
11        # root /data/www/www;

12
13         index index.html index.htm index.php;
14         location /
15         {
16             proxy_pass http://127.0.0.1:8080;
17         }
18
19         access_log /data/logs/jenkins/jenkins.log main;
20         }
21
22 server {
23     listen 80;
24     server_name jenkins.jimersylee.com;
25     rewrite ^ https://$server_name$request_uri? permanent;
26     }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;5.访问https://jenkins.jimersylee.com/
发现没有账号密码,修改jenkins为不需要账号密码&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /var/lib/jenkins/config.xml
&amp;lt;useSecurity&amp;gt;true&amp;lt;/useSecurity&amp;gt;修改为false
重启jenkins
sudo service jenkins restart
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;6.访问https://jenkins.jimersylee.com/
系统管理-&amp;gt;Configure Global Security 勾选启用安全,勾选使用jenkins专有数据库&lt;/p&gt;
&lt;p&gt;7.因为要使用某个特定账号如dev去执行shell,因此将jenkins的默认启动账号jenkins修改为dev&lt;/p&gt;
&lt;p&gt;8.如何修改运行jenkins进程的linux帐号？&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;找到jenkins的配置文件，一般是/etc/sysconfig/jenkins&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;修改下面的参数为相应的用户，比如JENKINS_USER=&amp;quot;dev&amp;quot;
&lt;pre&gt;&lt;code&gt;## Type:        string
## Default:     &quot;jenkins&quot;
## ServiceRestart: jenkins
#
# Unix user account that runs the Jenkins daemon
# Be careful when you change this, as you need to update
# permissions of $JENKINS_HOME and /var/log/jenkins.
#
JENKINS_USER=&quot;dev&quot;&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;修改下来文件或目录的权限&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;chown dev:dev file
chown -R admin:admin directory
/var/lib/jenkins/
/var/log/jenkins/
/var/cache/jenkins/
/usr/lib/jenkins/jenkins.war
/etc/sysconfig/jenkins&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;重启jenkins：service jenkins restart&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;通过war包安装&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;安装tomcat
mkdir /data/java_app/jenkins &amp;amp;&amp;amp; cd /data/java_app/jenkins&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;wget &lt;a href=&quot;https://mirrors.tuna.tsinghua.edu.cn/apache/tomcat/tomcat-9/v9.0.0.M26/bin/apache-tomcat-9.0.0.M26.zip&quot;&gt;https://mirrors.tuna.tsinghua.edu.cn/apache/tomcat/tomcat-9/v9.0.0.M26/bin/apache-tomcat-9.0.0.M26.zip&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;unzip apache-tomcat-9.0.0.M26.zip
mv apache-tomcat-9.0.0.M26 tomcat9
cd tomcat9/webapps
wget &lt;a href=&quot;http://mirrors.jenkins.io/war/latest/jenkins.war&quot;&gt;http://mirrors.jenkins.io/war/latest/jenkins.war&lt;/a&gt;
cd ../bin
sh catalina.sh&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;
&lt;p&gt;访问127.0.0.1:8080/jenkins&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;需要输入初始密码
cat /home/username/.jenkins/secrets/initialAdminPassword&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;然后配置插件什么的&lt;/li&gt;
&lt;/ol&gt;            </description>
            <pubDate>2017-09-04 23:02:45</pubDate>
            <link>//blog/devops/InstallJenkinsOnCentOS7.html</link>
            <guid isPermaLink="true">//blog/devops/InstallJenkinsOnCentOS7.html</guid>
                                               <category>devops</category>
                                    </item>
                <item>
            <title>Hello World</title>
            <description>
            &lt;!--
author: Jimersy Lee
head: 
date: 2014-01-01
title: Hello World
tags: Blog
images: 
category: 
status: publish
summary: 本人精通各种编程语言              的hello world!
--&gt;
&lt;h1&gt;Hello World&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;本人精通各种语言              的hello world!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;echo &quot;hello world&quot;;
printf &quot;hello world&quot;;
System.out.println(&quot;hello world&quot;);
print(&quot;hello world&quot;)
alert(&quot;hello world&quot;);
std::cout &amp;lt;&amp;lt; &quot;hello world&quot; &amp;lt;&amp;lt; std::endl;
Console.WriteLine(&quot;hello world&quot;); 
&lt;/code&gt;&lt;/pre&gt;            </description>
            <pubDate>2017-09-03 08:34:23</pubDate>
            <link>//blog/HelloWorld.html</link>
            <guid isPermaLink="true">//blog/HelloWorld.html</guid>
                    </item>
            </channel>
</rss>